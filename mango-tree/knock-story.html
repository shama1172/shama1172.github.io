<!DOCTYPE html>
<html>

<head>
    <title>Typewriter|Knock</title>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="assets/js/script.js" type="text/javascript"></script>
</head>

<body class="bg">
    <div class="story-teller">
        <h1 id="story"></h1>
        <iframe src="https://olafwempe.com/mp3/silence/silence.mp3" allow="autoplay" id="audio" style="display:none"></iframe>
        <audio id="typeAudio" autoplay hidden loop>
            <source src="assets/audios/typewriter_audio.mp3">
        </audio>
    </div>
    <div class="video-container">
        <div class="video-controls">
            <div class="main-video">
                <video id="mainVideo">
                    <source src="" type="video/mp4">
                </video>
            </div>
            <div class="controls">
                <button class="btn-theme dark btn-stop">Stop</button>
                <button class="btn-theme dark btn-play">Play</button>
                <button class="btn-theme dark btn-pause">Pause</button>
            </div>
        </div>
        <a class="btn-continue" href="end.html">Continue</a>
    </div>
    <script>
        var i = 0;
        var a = "";

        a = "AT THE END OF THE DAY, I WENT TO MY " + localStorage.getItem('knock') + "’S ROOM TO PLAY A GAME OF MONOPOLY. IT’S AROUND MY BEDTIME NOW, SO I THINK I HAVE TO END THIS LETTER HERE.\n\nSEE YOU IN 15 YEARS…";

        var speed = 60;

        function typeWriter() {
            if (i < a.length) {
                document.getElementById("story").innerHTML += a.charAt(i);
                i++;
                setTimeout(typeWriter, speed);
            } else {
                document.getElementById("typeAudio").pause();
                setTimeout(function() {
                    $(".video-container").show();
                }, 1000);
            }
        }
        typeWriter();
        if (localStorage.getItem("knock") == "brother") {
            $('#mainVideo source').attr('src', 'assets/videos/VHS Brother Knock.mp4');
            $("#mainVideo")[0].load();
        }
        if (localStorage.getItem("knock") == "sister") {
            $('#mainVideo source').attr('src', 'assets/videos/VHS Sister Knock.mp4');
            $("#mainVideo")[0].load();
        }
    </script>
</body>

</html>